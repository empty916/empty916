(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{384:function(t,a,s){"use strict";s.r(a);var e=s(42),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"natur-persist使用手册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#natur-persist使用手册"}},[t._v("#")]),t._v(" natur-persist使用手册")]),t._v(" "),s("h2",{attrs:{id:"基本介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本介绍"}},[t._v("#")]),t._v(" 基本介绍")]),t._v(" "),s("ul",[s("li",[t._v("natur状态管理器的缓存中间件")]),t._v(" "),s("li",[t._v("将natur数据同步到localStorage或者sessionStorage")]),t._v(" "),s("li",[t._v("同步操作有一定的延迟，使用防抖做同步操作")])]),t._v(" "),s("h2",{attrs:{id:"demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[t._v("#")]),t._v(" demo")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createStore "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'natur'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" createPersistMiddleware "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'natur-persist'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" middleware"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clearData "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPersistMiddleware")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  time"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  exclude"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^module2$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  include"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module3'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^module4$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  specific"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    user"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  storageType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localStorage'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清除缓存数据")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    middlewares"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      middleware"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用中间件, 同步数据到storage")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将缓存应用到store中")]),t._v("\nstore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("globalSetStates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),s("h2",{attrs:{id:"createpersistmiddleware选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#createpersistmiddleware选项"}},[t._v("#")]),t._v(" createPersistMiddleware选项")]),t._v(" "),s("h3",{attrs:{id:"name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[t._v("#")]),t._v(" name")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("必填：")]),t._v(" "),s("code",[t._v("false")])]),t._v(" "),s("li",[s("strong",[t._v("类型：")]),s("code",[t._v("string")])]),t._v(" "),s("li",[s("strong",[t._v("默认值：")]),s("code",[t._v("'_data'")])]),t._v(" "),s("li",[t._v("在localStorage中添加元素时，设置key的名称时会加上这个name作为前缀，防止不同应用之间有命名冲突")])]),t._v(" "),s("h3",{attrs:{id:"time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#time"}},[t._v("#")]),t._v(" time")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("必填：")]),t._v(" "),s("code",[t._v("false")])]),t._v(" "),s("li",[s("strong",[t._v("类型：")]),s("code",[t._v("number")])]),t._v(" "),s("li",[s("strong",[t._v("默认值：")]),s("code",[t._v("100")])]),t._v(" "),s("li",[t._v("同步延时，在往localStorage同步数据时，使用防抖做同步机制，并有一定的延时。")])]),t._v(" "),s("h3",{attrs:{id:"exclude"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exclude"}},[t._v("#")]),t._v(" exclude")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("必填：")]),t._v(" "),s("code",[t._v("false")])]),t._v(" "),s("li",[s("strong",[t._v("类型：")]),s("code",[t._v("Array<string|RegExp>")])]),t._v(" "),s("li",[t._v("在同步模块数据到localStorage时，可以配置是否忽略缓存某些模块")])]),t._v(" "),s("h3",{attrs:{id:"include"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#include"}},[t._v("#")]),t._v(" include")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("必填：")]),s("code",[t._v("false")])]),t._v(" "),s("li",[s("strong",[t._v("类型：")]),s("code",[t._v("Array<string|RegExp>")])]),t._v(" "),s("li",[t._v("在同步模块数据到localStorage时，可以配置是否只缓存某些模块，exclude优先级要高于include")])]),t._v(" "),s("h3",{attrs:{id:"specific"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#specific"}},[t._v("#")]),t._v(" specific")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("必填：")]),s("code",[t._v("false")])]),t._v(" "),s("li",[s("strong",[t._v("类型：")]),s("code",[t._v("{[moduleName: string]: number}")])]),t._v(" "),s("li",[t._v("配置某些模块的延迟时间，如果number为0，那么将会是同步缓存，不用防抖机制")])]),t._v(" "),s("h3",{attrs:{id:"storagetype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storagetype"}},[t._v("#")]),t._v(" storageType")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("必填：")]),s("code",[t._v("false")])]),t._v(" "),s("li",[s("strong",[t._v("类型：")]),s("code",[t._v("'localStorage'|'sessionStorage'")])]),t._v(" "),s("li",[s("strong",[t._v("默认值：")]),s("code",[t._v("'localStorage'")])]),t._v(" "),s("li",[t._v("缓存类型")])]),t._v(" "),s("h2",{attrs:{id:"createpersistmiddleware返回值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#createpersistmiddleware返回值"}},[t._v("#")]),t._v(" createPersistMiddleware返回值")]),t._v(" "),s("h3",{attrs:{id:"middleware"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#middleware"}},[t._v("#")]),t._v(" middleware")]),t._v(" "),s("ul",[s("li",[t._v("中间件，用于拦截store的数据，并触发缓存机制")])]),t._v(" "),s("h3",{attrs:{id:"getdata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getdata"}},[t._v("#")]),t._v(" getData")]),t._v(" "),s("ul",[s("li",[t._v("获取缓存中的数据")])]),t._v(" "),s("h3",{attrs:{id:"cleardata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cleardata"}},[t._v("#")]),t._v(" clearData")]),t._v(" "),s("ul",[s("li",[t._v("清除缓存中的数据")])])])}),[],!1,null,null,null);a.default=r.exports}}]);