<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>umi-natur | EMPTY916</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="empty site">
    
    <link rel="preload" href="/assets/css/0.styles.fdde5c9a.css" as="style"><link rel="preload" href="/assets/js/app.6d9a43fc.js" as="script"><link rel="preload" href="/assets/js/2.e4845fa5.js" as="script"><link rel="preload" href="/assets/js/15.aec7285d.js" as="script"><link rel="prefetch" href="/assets/js/10.12619a27.js"><link rel="prefetch" href="/assets/js/11.1d2aa330.js"><link rel="prefetch" href="/assets/js/12.1901c72b.js"><link rel="prefetch" href="/assets/js/13.1f068a17.js"><link rel="prefetch" href="/assets/js/14.4435c0a6.js"><link rel="prefetch" href="/assets/js/16.61b51609.js"><link rel="prefetch" href="/assets/js/17.1435c0f5.js"><link rel="prefetch" href="/assets/js/18.a56c9aac.js"><link rel="prefetch" href="/assets/js/19.ad3a5d86.js"><link rel="prefetch" href="/assets/js/20.0f699001.js"><link rel="prefetch" href="/assets/js/21.43c02f67.js"><link rel="prefetch" href="/assets/js/22.2db5db5d.js"><link rel="prefetch" href="/assets/js/3.932f1f45.js"><link rel="prefetch" href="/assets/js/4.bd1f08ae.js"><link rel="prefetch" href="/assets/js/5.a4018245.js"><link rel="prefetch" href="/assets/js/6.413eb88d.js"><link rel="prefetch" href="/assets/js/7.74822fa5.js"><link rel="prefetch" href="/assets/js/8.b5760b33.js"><link rel="prefetch" href="/assets/js/9.2b283bae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fdde5c9a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">EMPTY916</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Natur" class="dropdown-title"><span class="title">Natur</span> <span class="arrow down"></span></button> <button type="button" aria-label="Natur" class="mobile-dropdown-title"><span class="title">Natur</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/natur/" class="nav-link">
  natur
</a></li><li class="dropdown-item"><!----> <a href="/natur/api.html" class="nav-link">
  natur api
</a></li><li class="dropdown-item"><!----> <a href="/natur-service/" class="nav-link">
  natur-service
</a></li><li class="dropdown-item"><!----> <a href="/natur-persist/" class="nav-link">
  natur-persist
</a></li><li class="dropdown-item"><!----> <a href="/natur-persist-async/" class="nav-link">
  natur-persist-async
</a></li><li class="dropdown-item"><!----> <a href="/natur-immer/" class="nav-link">
  natur-immer
</a></li><li class="dropdown-item"><!----> <a href="/umi-natur/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  umi-natur
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/empty916" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/umi-natur/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/umi-natur/" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Natur" class="dropdown-title"><span class="title">Natur</span> <span class="arrow down"></span></button> <button type="button" aria-label="Natur" class="mobile-dropdown-title"><span class="title">Natur</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/natur/" class="nav-link">
  natur
</a></li><li class="dropdown-item"><!----> <a href="/natur/api.html" class="nav-link">
  natur api
</a></li><li class="dropdown-item"><!----> <a href="/natur-service/" class="nav-link">
  natur-service
</a></li><li class="dropdown-item"><!----> <a href="/natur-persist/" class="nav-link">
  natur-persist
</a></li><li class="dropdown-item"><!----> <a href="/natur-persist-async/" class="nav-link">
  natur-persist-async
</a></li><li class="dropdown-item"><!----> <a href="/natur-immer/" class="nav-link">
  natur-immer
</a></li><li class="dropdown-item"><!----> <a href="/umi-natur/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  umi-natur
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/empty916" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/umi-natur/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/umi-natur/" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>umi-natur</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/umi-natur/#install" class="sidebar-link">install</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/umi-natur/#common-use" class="sidebar-link">common use</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/umi-natur/#ssr-usecase" class="sidebar-link">ssr usecase</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/umi-natur/#use-service" class="sidebar-link">use service</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/umi-natur/#natur" class="sidebar-link">natur</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/umi-natur/#dirname" class="sidebar-link">dirName</a></li><li class="sidebar-sub-header"><a href="/umi-natur/#issyncmodule" class="sidebar-link">isSyncModule</a></li><li class="sidebar-sub-header"><a href="/umi-natur/#interceptors" class="sidebar-link">interceptors</a></li><li class="sidebar-sub-header"><a href="/umi-natur/#middlewares" class="sidebar-link">middlewares</a></li></ul></li><li><a href="/umi-natur/#persist" class="sidebar-link">persist</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/umi-natur/#service" class="sidebar-link">service</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/umi-natur/#dirname-2" class="sidebar-link">dirName</a></li><li class="sidebar-sub-header"><a href="/umi-natur/#superclassname" class="sidebar-link">superClassName</a></li><li class="sidebar-sub-header"><a href="/umi-natur/#ignore" class="sidebar-link">ignore</a></li></ul></li><li><a href="/umi-natur/#license" class="sidebar-link">LICENSE</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="umi-natur"><a href="#umi-natur" class="header-anchor">#</a> umi-natur</h1> <ul><li>the umi plug-in that automatically generates natur code is super easy to use</li> <li>support automatic configuration of natur</li> <li>support automatic scanning of natur module code and import</li> <li>support ssr scene</li> <li>support automatic scanning of service code and automatic configuration, the same servcie can also be applied to ssr scenarios</li> <li>support persist configuration</li></ul> <h2 id="install"><a href="#install" class="header-anchor">#</a> install</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># or npm install umi-natur -D</span>
$ <span class="token function">yarn</span> <span class="token function">add</span> umi-natur -D

<span class="token comment"># or npm install natur -S</span>
$ <span class="token function">yarn</span> <span class="token function">add</span> natur
</code></pre></div><h2 id="common-use"><a href="#common-use" class="header-anchor">#</a> common use</h2> <ol><li>at first, config your <code>.umirc.ts</code>,</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// configure natur plugin to umi</span>
    <span class="token string">'umi-natur'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  natur<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>then create natur module
<code>store/count.ts</code></li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token punctuation">(</span>newState<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> newState<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>
  actions<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> count<span class="token punctuation">;</span>

</code></pre></div><ol start="3"><li>use natur module</li></ol> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> injector <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token keyword">typeof</span> injector<span class="token punctuation">.</span>type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">.</span>actions<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>count<span class="token punctuation">.</span>state<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">injector</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ssr-usecase"><a href="#ssr-usecase" class="header-anchor">#</a> ssr usecase</h2> <div class="custom-block tip"><p class="custom-block-title">Minimum Version Requirements</p> <p>umi &gt;= 3.4.14<br>
umi-natur &gt;= 1.1.1</p></div> <p>Configure in <code>.umirc.ts</code>,</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'umi-natur'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  ssr<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  natur<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>index.tsx</code></p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject<span class="token punctuation">,</span> Store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> injector <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'aModule'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>aModule<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token keyword">typeof</span> injector<span class="token punctuation">.</span>type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// run client side action</span>
    aModule<span class="token punctuation">.</span>actions<span class="token punctuation">.</span><span class="token function">aAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

App<span class="token punctuation">.</span><span class="token function-variable function">getInitialProps</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>store<span class="token operator">:</span> Store<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// run server side action. The code here will not be executed on the client side, so you have to execute it again on the client side</span>
  <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'aModule'</span><span class="token punctuation">,</span> <span class="token string">'aAction'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// must return all states to client</span>
  <span class="token keyword">return</span> store<span class="token punctuation">.</span><span class="token function">getAllStates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">injector</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="use-service"><a href="#use-service" class="header-anchor">#</a> use service</h2> <ol><li>add service config
<code>.umirc.ts</code></li></ol> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'umi-natur'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  natur<span class="token operator">:</span> <span class="token punctuation">{</span>
    service<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>create service module
<code>service/count2</code></li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BaseService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>

<span class="token comment">// This means that the count2 module will monitor the changes of count, and then synchronize the state of count to its own state</span>
<span class="token comment">// The class name must start with uppercase</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Count2Service</span> <span class="token keyword">extends</span> <span class="token class-name">BaseService</span> <span class="token punctuation">{</span>
    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// The code here is executed automatically，ssr mode also</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>state<span class="token punctuation">,</span> actionName<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>actionName <span class="token operator">===</span> <span class="token string">'update'</span> <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'count2'</span><span class="token punctuation">,</span> <span class="token string">'update'</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">getCount2State</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getModule</span><span class="token punctuation">(</span><span class="token string">'count2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>Use the service module</li></ol> <p><code>some.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Class instances start with a lowercase letter</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> count2Service <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@@/service'</span><span class="token punctuation">;</span>
count2Service<span class="token punctuation">.</span><span class="token function">getCount2State</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="parameter-introduction"><a href="#parameter-introduction" class="header-anchor">#</a> parameter introduction</h1> <h2 id="natur"><a href="#natur" class="header-anchor">#</a> natur</h2> <ul><li><p><strong>type:</strong><code>object</code></p></li> <li><p>The plugin will automatically scan the files under the store folder by default, if the legal natur module is exported by default, it will be captured by the plugin, and generate the code under .umi/store</p></li> <li><p>demo</p> <p><code>src/store/demo.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>
  actions<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>use-store-and-inject.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>store<span class="token punctuation">,</span> inject<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> demo <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getModule</span><span class="token punctuation">(</span><span class="token string">'demo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> injector <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'demo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>The file path will be converted to the module name, for example:</p> <ul><li><code>src/store/modulea-list.ts</code>will be transformed into<code>moduleaList</code></li> <li><code>src/store/module_a/list/[id$].ts</code>will be transformed into<code>moduleAListId</code></li></ul></li></ul> <h3 id="dirname"><a href="#dirname" class="header-anchor">#</a> dirName</h3> <ul><li><strong>required:</strong> <code>false</code></li> <li><strong>type:</strong><code>string</code></li> <li><strong>default:</strong><code>'store'</code></li> <li>The plugin defaults that your natur module code is written in the store folder. If your module is written in other folders, you can also modify it, such as 'pages'</li></ul> <h3 id="issyncmodule"><a href="#issyncmodule" class="header-anchor">#</a> isSyncModule</h3> <ul><li><strong>required:</strong> <code>false</code></li> <li><strong>type:</strong><code>(filePath: string) =&gt; boolean</code></li> <li>according to the file address, determine whether this module is a synchronous module, either a synchronous module or an asynchronous module</li></ul> <h3 id="interceptors"><a href="#interceptors" class="header-anchor">#</a> interceptors</h3> <ul><li><p><strong>required:</strong> <code>false</code></p></li> <li><p><strong>type:</strong><code>string</code></p></li> <li><p>your interceptors file address</p></li> <li><p>This file address must be the default exported function</p></li> <li><p>The input parameter of this function is a function to get store, and the return value of this function must be an intercepter array</p></li> <li><p>demo</p> <p><code>.umirc.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'umi-natur'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  natur<span class="token operator">:</span> <span class="token punctuation">{</span>
    interceptors<span class="token operator">:</span> <span class="token string">'@/my-interceptors.ts'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>my-interceptors.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token function-variable function">getStore</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Store<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...your interceptors</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="middlewares"><a href="#middlewares" class="header-anchor">#</a> middlewares</h3> <ul><li><p><strong>required:</strong> <code>false</code></p></li> <li><p><strong>type:</strong><code>string</code></p></li> <li><p>Your middlewares file address</p></li> <li><p>This file address must be the default exported function</p></li> <li><p>The input parameter of this function is a function to get store, and the return value of this function must be an array of middlewares</p></li> <li><p>Once you customize the middleware, the default middleware will be removed, and the configuration of the middleware will be completely up to you</p></li> <li><p>demo</p> <p><code>.umirc.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'umi-natur'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  natur<span class="token operator">:</span> <span class="token punctuation">{</span>
    middlewares<span class="token operator">:</span> <span class="token string">'@/my-middlewares.ts'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>my-middlewares.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token function-variable function">getStore</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Store<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...your middlewares</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="persist"><a href="#persist" class="header-anchor">#</a> persist</h2> <ul><li><p><strong>required:</strong> <code>false</code></p></li> <li><p><strong>type:</strong><code>object</code></p></li> <li><p>This is the persistent configuration</p></li> <li><p>Same as <a href="/natur-persist">natur-persist</a> configuration</p></li></ul> <h2 id="service"><a href="#service" class="header-anchor">#</a> service</h2> <ul><li><p><strong>required:</strong> <code>false</code></p></li> <li><p><strong>type:</strong><code>object</code></p></li> <li><p>The plugin will scan the code in the service folder. If there are Service classes in the files in this folder that are exported by default, then the code for Service instantiation will be automatically generated under .umi/service</p></li> <li><p>demo</p> <p><code>src/service/demo.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BaseService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'umi'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">DemoService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseService</span> <span class="token punctuation">{</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'other'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dispath</span><span class="token punctuation">(</span><span class="token string">'demo'</span><span class="token punctuation">,</span> <span class="token string">'action'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">getDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getModule</span><span class="token punctuation">(</span><span class="token string">'demo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>use-service.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> demoService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@@/service'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> demo <span class="token operator">=</span> demoService<span class="token punctuation">.</span><span class="token function">getDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="dirname-2"><a href="#dirname-2" class="header-anchor">#</a> dirName</h3> <ul><li><strong>type:</strong><code>string</code></li> <li><strong>default:</strong><code>'service'</code></li> <li>The plug-in scans the code in the service folder. If there are files in this folder, Service classes are exported by default</li> <li>Then the code for Service instantiation will be automatically generated under .umi/service</li></ul> <h3 id="superclassname"><a href="#superclassname" class="header-anchor">#</a> superClassName</h3> <ul><li><strong>type:</strong><code>string</code></li> <li><strong>default:</strong><code>'BaseService'</code></li> <li>The key to identifying whether it is a Service class is that if the class is integrated in BaseService, it will be exported</li> <li>Similarly, if you define a Service base class yourself, then you can also modify the scan configuration</li></ul> <h3 id="ignore"><a href="#ignore" class="header-anchor">#</a> ignore</h3> <ul><li><strong>required:</strong> <code>false</code></li> <li><strong>type:</strong> <code>RegExp[]</code></li> <li>If you do not want some Service classes to be automatically generated code, then you can configure the ignored class name</li></ul> <h2 id="license"><a href="#license" class="header-anchor">#</a> LICENSE</h2> <p>MIT</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/1/2021, 10:09:40 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6d9a43fc.js" defer></script><script src="/assets/js/2.e4845fa5.js" defer></script><script src="/assets/js/15.aec7285d.js" defer></script>
  </body>
</html>
